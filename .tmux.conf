unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix
# if-shell "test -f ~/configs/.tmux-status.conf" "source ~/configs/.tmux-status.conf"
# if-shell "test -f ~/configs/.tmuxline" "source ~/configs/.tmuxline"


set-window-option -g mode-keys vi
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'xclip -in -selection clipboard'

# vim-like pane switching
bind -r k select-pane -U
bind -r j select-pane -D
bind -r h select-pane -L
bind -r l select-pane -R

set -s escape-time 0

bind-key -r f run-shell "tmux neww ~/configs/bashScripts/tmux-fzf"         


bind C-y display-popup \
  -d "#{pane_current_path}" \
  -w 80% \
  -h 80% \
  -E "lazygit"
bind C-n display-popup -E 'bash -i -c "read -p \"Session name: \" name; tmux new-session -d -s \$name && tmux switch-client -t \$name"'
bind C-j display-popup -E "tmux list-sessions | sed -E 's/:.*$//' | grep -v \"^$(tmux display-message -p '#S')\$\" | fzf --reverse | xargs tmux switch-client -t"
bind C-f display-popup \
  -w 80% \
  -h 80% \
  -E 'rmpc'
bind C-t display-popup \
  -d "#{pane_current_path}" \
  -w 75% \
  -h 75% \
  -E "zsh"


bind C-d display-menu -T "#[align=centre]Dotfiles" -x C -y C \
  ".zshrc"            z  "display-popup -w 75% -h 75% -E 'nvim ~/.zshrc' " \
  ".tmux.conf"        t  "display-popup -w 75% -h 75% -E 'nvim ~/.tmux.conf'" \
  "config"        c  "display-popup -w 75% -h 75% -E 'nvim ~/configs'" \
  ".nvim"     n  "display-popup -d "~/.config/nvim" -w 75% -h 75% -E 'nvim' " \
  "Exit"              q  ""
   
bind-key Space switch-client -l

set-option -g default-terminal 'screen-256color'
set-option -g terminal-overrides ',xterm-256color:RGB'

set -g detach-on-destroy off     # don't exit from tmux when closing a session
set -g history-limit 1000000     # increase history size (from 2,000)
set -g renumber-windows on       # renumber all windows when any window is closed
set -g set-clipboard on          # use system clipboard
set -g status-position top       # macOS / darwin style
set -g default-terminal "${TERM}"
setw -g mode-keys vi
set -g pane-active-border-style 'fg=magenta,bg=default'
set -g pane-border-style 'fg=brightblack,bg=default'

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'catppuccin/tmux#v2.1.3'
set -g @plugin 'omerxx/tmux-sessionx'

set -g @sessionx-bind 'C-k'


set -g @catppuccin_window_left_separator ""
set -g @catppuccin_window_right_separator " "
set -g @catppuccin_window_middle_separator " █"
set -g @catppuccin_window_number_position "right"
set -g @catppuccin_window_default_fill "number"
set -g @catppuccin_window_default_text "#W"
set -g @catppuccin_window_current_fill "number"
set -g @catppuccin_window_current_text "#W#{?window_zoomed_flag,(),}"
set -g @catppuccin_status_left_separator  " "
set -g @catppuccin_status_right_separator " "
set -g @catppuccin_status_right_separator_inverse "no"
set -g @catppuccin_status_fill "icon"
set -g @catppuccin_status_connect_separator "yes"
set -g @catppuccin_directory_text "#W"
set -g @catppuccin_date_time_text " %H:%M"
set -g @catppuccin_window_text "#W"
set -g @catppuccin_window_status_style "rounded"
set -g @catppuccin_window_status "no"
set -g @catppuccin_status_module_text_bg '#{E:@thm_mantle}'

set -g status-left-length 100
set -g status-right-length 100
set -gF status-left "#{@catppuccin_status_session} "
set -gF status-right "#{@catppuccin_status_user}"
set -agF status-right "#{E:@catppuccin_status_date_time}"

run '~/.tmux/plugins/tpm/tpm'

